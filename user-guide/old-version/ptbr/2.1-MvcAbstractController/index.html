



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Awesome PHP Framework with high productivity">
      
      
        <link rel="canonical" href="https://suitupframework.com/user-guide/old-version/ptbr/2.1-MvcAbstractController/">
      
      
        <meta name="author" content="https://www.thizer.com">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>2.1 MvcAbstractController - Suitup Framework</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
      <script src="../../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../../assets/css/extra-style.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-64023203-5", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-purple" data-md-color-accent="">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#mvcabstractcontroller" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://suitupframework.com/" title="Suitup Framework" class="md-header-nav__button md-logo">
          
            <i class="md-icon">person_pin_circle</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Suitup Framework
            </span>
            <span class="md-header-nav__topic">
              
                2.1 MvcAbstractController
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/braghimsistemas/suitup-php" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    braghimsistemas/suitup-php
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../.." title="User Guide" class="md-tabs__link md-tabs__link--active">
          User Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../troubleshooting/issues/" title="Troubleshooting" class="md-tabs__link">
          Troubleshooting
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../contributors/" title="Contributors" class="md-tabs__link">
          Contributors
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../about/" title="About" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://suitupframework.com/" title="Suitup Framework" class="md-nav__button md-logo">
      
        <i class="md-icon">person_pin_circle</i>
      
    </a>
    Suitup Framework
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/braghimsistemas/suitup-php" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    braghimsistemas/suitup-php
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
    
    <label class="md-nav__link" for="nav-1">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/impatients/" title="Tutorial for impatients" class="md-nav__link">
      Tutorial for impatients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/from-source/" title="Step By Step Tutorial" class="md-nav__link">
      Step By Step Tutorial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../demo-projects/" title="Demo projects" class="md-nav__link">
      Demo projects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-6" type="checkbox" id="nav-1-6">
    
    <label class="md-nav__link" for="nav-1-6">
      Reference documents
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-1-6">
        Reference documents
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Routes" class="md-nav__link">
      Routes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Controllers \& Actions" class="md-nav__link">
      Controllers \& Actions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/abstract-controller/" title="Abstract Controller" class="md-nav__link">
      Abstract Controller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Error Controller" class="md-nav__link">
      Error Controller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Modules" class="md-nav__link">
      Modules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Views \& Layouts" class="md-nav__link">
      Views \& Layouts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-6-8" type="checkbox" id="nav-1-6-8">
    
    <label class="md-nav__link" for="nav-1-6-8">
      Models (database)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-6-8">
        Models (database)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Workflow ((IMPORTANT))" class="md-nav__link">
      Workflow ((IMPORTANT))
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Business" class="md-nav__link">
      Business
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Gateways" class="md-nav__link">
      Gateways
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Adapters (help wanted)" class="md-nav__link">
      Adapters (help wanted)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="SQL Queries" class="md-nav__link">
      SQL Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="SQL Monitor" class="md-nav__link">
      SQL Monitor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Out of box" class="md-nav__link">
      Out of box
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Form Validation" class="md-nav__link">
      Form Validation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Pagination" class="md-nav__link">
      Pagination
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/overview/" title="Functions outstand" class="md-nav__link">
      Functions outstand
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-7" type="checkbox" id="nav-1-7" checked>
    
    <label class="md-nav__link" for="nav-1-7">
      Old Version
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-1-7">
        Old Version
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-7-1" type="checkbox" id="nav-1-7-1" checked>
    
    <label class="md-nav__link" for="nav-1-7-1">
      Português (Brasil)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-7-1">
        Português (Brasil)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../1.-Instalação/" title="1. Instalação" class="md-nav__link">
      1. Instalação
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.1-Constantes-padrão/" title="1.1 Constantes padrão" class="md-nav__link">
      1.1 Constantes padrão
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.-Controllers-e-Views/" title="2. Controllers e Views" class="md-nav__link">
      2. Controllers e Views
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        2.1 MvcAbstractController
      </label>
    
    <a href="./" title="2.1 MvcAbstractController" class="md-nav__link md-nav__link--active">
      2.1 MvcAbstractController
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mvcabstractcontroller" title="MvcAbstractController" class="md-nav__link">
    MvcAbstractController
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workflow-do-suitup" title="Workflow do SuitUp" class="md-nav__link">
    Workflow do SuitUp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#o-que-ja-vem-por-padrao-no-suitup" title="O que já vem por padrão no SuitUp" class="md-nav__link">
    O que já vem por padrão no SuitUp
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#login-simples" title="Login simples" class="md-nav__link">
    Login simples
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login-com-namespace-por-modulo" title="Login com namespace por módulo" class="md-nav__link">
    Login com namespace por módulo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atencao" title="Atenção." class="md-nav__link">
    Atenção.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atencao_1" title="Atenção." class="md-nav__link">
    Atenção.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atencao_2" title="Atenção!" class="md-nav__link">
    Atenção!
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sessionfilter-sessao-de-filtros" title="SessionFilter (Sessão de Filtros)" class="md-nav__link">
    SessionFilter (Sessão de Filtros)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.2-ErrorController/" title="2.2 ErrorController" class="md-nav__link">
      2.2 ErrorController
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.3-Paginação/" title="2.3 Paginação" class="md-nav__link">
      2.3 Paginação
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.4-Debug/" title="2.4 Debug" class="md-nav__link">
      2.4 Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3.-Layouts/" title="3. Layouts" class="md-nav__link">
      3. Layouts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.-Formulários/" title="4. Formulários" class="md-nav__link">
      4. Formulários
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.1-Validações/" title="4.1 Validações" class="md-nav__link">
      4.1 Validações
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.2-Filtros/" title="4.2 Filtros" class="md-nav__link">
      4.2 Filtros
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.3-Validação-Personalizada/" title="4.3 Validação Personalizada" class="md-nav__link">
      4.3 Validação Personalizada
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.4-Filtro-Personalizado/" title="4.4 Filtro Personalizado" class="md-nav__link">
      4.4 Filtro Personalizado
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../5.-Banco-de-dados/" title="5. Banco de dados" class="md-nav__link">
      5. Banco de dados
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../5.1-database.config.php/" title="5.1 database.config.php" class="md-nav__link">
      5.1 database.config.php
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../5.2-Monitoramento-de-SQL/" title="5.2 Monitoramento de SQL" class="md-nav__link">
      5.2 Monitoramento de SQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../6.-Rotas/" title="6. Rotas" class="md-nav__link">
      6. Rotas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../7.-Funções/" title="7. Funções" class="md-nav__link">
      7. Funções
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-7-2" type="checkbox" id="nav-1-7-2">
    
    <label class="md-nav__link" for="nav-1-7-2">
      English
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-7-2">
        English
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/1.-Install/" title="1. Install" class="md-nav__link">
      1. Install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/1.1-Default-Constants/" title="1.1 Default Constants" class="md-nav__link">
      1.1 Default Constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/2.-Controllers-and-Views/" title="2. Controllers and Views" class="md-nav__link">
      2. Controllers and Views
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/2.1-MvcAbstractController/" title="2.1 MvcAbstractController" class="md-nav__link">
      2.1 MvcAbstractController
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/2.2-ErrorController/" title="2.2 ErrorController" class="md-nav__link">
      2.2 ErrorController
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/2.3-Pagination/" title="2.3 Pagination" class="md-nav__link">
      2.3 Pagination
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/2.4-Debug/" title="2.4 Debug" class="md-nav__link">
      2.4 Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/3.-Layouts/" title="3. Layouts" class="md-nav__link">
      3. Layouts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/4.-Forms/" title="4. Forms" class="md-nav__link">
      4. Forms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/4.1-Validation/" title="4.1 Validation" class="md-nav__link">
      4.1 Validation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/4.2-Filters/" title="4.2 Filters" class="md-nav__link">
      4.2 Filters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/4.3-Personal-Validation/" title="4.3 Personal Validation" class="md-nav__link">
      4.3 Personal Validation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/4.4-Personal-Filter/" title="4.4 Personal Filter" class="md-nav__link">
      4.4 Personal Filter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/5.-Database/" title="5. Database" class="md-nav__link">
      5. Database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/5.1-database.config.php/" title="5.1 database.config.php" class="md-nav__link">
      5.1 database.config.php
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/5.2-SQL-Monitoring/" title="5.2 SQL Monitoring" class="md-nav__link">
      5.2 SQL Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/6.-Routes/" title="6. Routes" class="md-nav__link">
      6. Routes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../en/7.-Functions/" title="7. Functions" class="md-nav__link">
      7. Functions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Troubleshooting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Troubleshooting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../troubleshooting/issues/" title="Github Issues" class="md-nav__link">
      Github Issues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Contributors
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Contributors
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../contributors/" title="How to contribute" class="md-nav__link">
      How to contribute
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../about/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../about/compatibility/" title="Comparing to Suitup 1" class="md-nav__link">
      Comparing to Suitup 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../about/LICENSE/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mvcabstractcontroller" title="MvcAbstractController" class="md-nav__link">
    MvcAbstractController
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workflow-do-suitup" title="Workflow do SuitUp" class="md-nav__link">
    Workflow do SuitUp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#o-que-ja-vem-por-padrao-no-suitup" title="O que já vem por padrão no SuitUp" class="md-nav__link">
    O que já vem por padrão no SuitUp
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#login-simples" title="Login simples" class="md-nav__link">
    Login simples
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login-com-namespace-por-modulo" title="Login com namespace por módulo" class="md-nav__link">
    Login com namespace por módulo
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atencao" title="Atenção." class="md-nav__link">
    Atenção.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atencao_1" title="Atenção." class="md-nav__link">
    Atenção.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atencao_2" title="Atenção!" class="md-nav__link">
    Atenção!
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sessionfilter-sessao-de-filtros" title="SessionFilter (Sessão de Filtros)" class="md-nav__link">
    SessionFilter (Sessão de Filtros)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>2.1 MvcAbstractController</h1>
                
                <h2 id="mvcabstractcontroller">MvcAbstractController<a class="headerlink" href="#mvcabstractcontroller" title="Permanent link">&para;</a></h2>
<p>Durante a programação de um sistema é muito comum que você precise realizar uma mesma tarefa em diversos locais diferentes, por exemplo, verificar se houve <code>POST</code>. Este é um dos motivos para este arquivo existir, assim nós podemos prover a você uma série de métodos que servem de atalho para tarefas repetitivas em seus sistemas.</p>
<p>Neste mesmo modelo, você pode implementar seus próprios métodos aqui apenas extendendo esta classe e apontando o controlador para esta sua nova que recomendamos chamar de <strong>AbstractController</strong>. [[Você pode encontrar mais detalhes aqui.|2. Controllers e Views#abstractcontroller]]</p>
<p>Mas a menos que sejam estáticos, estes métodos não podem ser acessados da <em>view</em> ou de <em>model</em>, na verdade não podem ser acessados em nenhum lugar fora do escopo do controlador, então para isso você pode criar um arquivo <code>functions.php</code> na raiz de seu projeto e implementar suas próprias funções que serão acessíveis de qualquer lugar. Neste caso basta fazer um include deste seu novo arquivo no <code>index.php</code> ([[aqui neste link|1. Instalação#indexphp]]).</p>
<h3 id="workflow-do-suitup">Workflow do <em>SuitUp</em><a class="headerlink" href="#workflow-do-suitup" title="Permanent link">&para;</a></h3>
<p>Não há segredos, o <em>SuitUp</em> sabe que seu controlador extende a esta classe <em>MvcAbstractController</em>, isso é obrigatório. Alguns métodos desta classe são necessários para o funcionamento do framework e ainda em uma determinada ordem correta. Deste modo é possível criar algumas rotinas em seu sistema para situações específicas.</p>
<p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="x">// Com a instancia do seu controlador o SuitUp</span>
<span class="x">// irá chamar os métodos a seguir nesta mesma ordem</span>

<span class="x">// 1. Lançado antes do init e da ação atual</span>
<span class="x">$this-&gt;mvc-&gt;controller-&gt;preDispatch();</span>

<span class="x">// 2. Método init</span>
<span class="x">$this-&gt;mvc-&gt;controller-&gt;init();</span>

<span class="x">// 3. Ação atual (depende da URL)</span>
<span class="x">$this-&gt;mvc-&gt;controller-&gt;{$this-&gt;mvc-&gt;actionName}();</span>

<span class="x">// 4. Lançado depois da ação atual, antes de mostrar o conteúdo na tela.</span>
<span class="x">$this-&gt;mvc-&gt;controller-&gt;posDispatch();</span>
</pre></div>
</td></tr></table>
Você pode sobrescrever estes métodos a vontade, mas no caso do <code>preDispatch</code> e <code>posDispatch</code> não se esqueça de chamar o método original também, caso contrário o <em>SuitUp</em> não funcionará corretamente.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="x">namespace ModuleDefault\Controllers;</span>

<span class="x">abstract class AbstractController extends \SuitUp\Mvc\MvcAbstractController</span>
<span class="x">{</span>
<span class="x">    public function preDispatch() {</span>
<span class="x">        // Aqui você pode implementar o que Deus tocar no seu coração</span>

<span class="x">        // Mas não esqueça de chamar o método original</span>
<span class="x">        // para o bom funcionamento do SuitUp</span>
<span class="x">        parent::preDispatch();</span>

<span class="x">        // OU aqui você pode implementar o que Deus tocar no seu coração</span>
<span class="x">    }</span>

<span class="x">    public function posDispatch() {</span>
<span class="x">        // Aqui você pode implementar o que Deus tocar no seu coração</span>

<span class="x">        // Mas não esqueça de chamar o método original</span>
<span class="x">        // para o bom funcionamento do SuitUp</span>
<span class="x">        parent::posDispatch();</span>

<span class="x">        // OU aqui você pode implementar o que Deus tocar no seu coração</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</td></tr></table>

<h3 id="o-que-ja-vem-por-padrao-no-suitup">O que já vem por padrão no <em>SuitUp</em><a class="headerlink" href="#o-que-ja-vem-por-padrao-no-suitup" title="Permanent link">&para;</a></h3>
<p>A lista abaixo descreve todos os métodos que são padrão do <em>MvcAbstractController</em> e podem ser utilizados dentro de qualquer controlador do seu sistema.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#preDispatch">preDispatch</a></td>
<td><a href="#init">init</a></td>
<td><a href="#indexAction">indexAction</a></td>
<td><a href="#errorAction">errorAction</a></td>
</tr>
<tr>
<td><a href="#notFoundAction">notFoundAction</a></td>
<td><a href="#posDispatch">posDispatch</a></td>
<td><a href="#getMsgNsp">getMsgNsp</a></td>
<td><a href="#getModuleName">getModuleName</a></td>
</tr>
<tr>
<td><a href="#getControllerName">getControllerName</a></td>
<td><a href="#getActionName">getActionName</a></td>
<td><a href="#getLayoutName">getLayoutName</a></td>
<td><a href="#setLayout">setLayout</a></td>
</tr>
<tr>
<td><a href="#renderView">renderView</a></td>
<td><a href="#addViewVar">addViewVar</a></td>
<td><a href="#isViewVar">isViewVar</a></td>
<td><a href="#getViewVar">getViewVar</a></td>
</tr>
<tr>
<td><a href="#getParams">getParams</a></td>
<td><a href="#getParam">getParam</a></td>
<td><a href="#isPost">isPost</a></td>
<td><a href="#getPost">getPost</a></td>
</tr>
<tr>
<td><a href="#setLogin">setLogin</a></td>
<td><a href="#isLogged">isLogged</a></td>
<td><a href="#getLogin">getLogin</a></td>
<td><a href="#updateLoginKey">updateLoginKey</a></td>
</tr>
<tr>
<td><a href="#addMsg">addMsg</a></td>
<td><a href="#uploadFile">uploadFile</a></td>
<td><a href="#uploadFileImageBase64">uploadFileImageBase64</a></td>
<td><a href="#getReferer">getReferer</a></td>
</tr>
<tr>
<td><a href="#redirect">redirect</a></td>
<td><a href="#ajax">ajax</a></td>
<td><a href="#addSessionFilter">addSessionFilter</a></td>
<td><a href="#getSessionFilter">getSessionFilter</a></td>
</tr>
<tr>
<td><a href="#removeSessionFilter">removeSessionFilter</a></td>
<td><a href="#clearSessionFilter">clearSessionFilter</a></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<hr />
<h4 id="this-gtpredispatch"><a name="preDispatch" href="#"></a><code>$this-&gt;preDispatch();</code><a class="headerlink" href="#this-gtpredispatch" title="Permanent link">&para;</a></h4>
<p>Lançado antes de qualquer outra coisa no controlador, executa internamente algumas ações para o bom funcionamento do <em>SuitUp</em>. Não deve ser sobrescrito sem ser chamado internamente com <code>parent::preDispatch();</code>.</p>
<h4 id="this-gtinit"><a name="init" href="#"></a><code>$this-&gt;init();</code><a class="headerlink" href="#this-gtinit" title="Permanent link">&para;</a></h4>
<p>Lançado após o <code>preDispatch()</code>, mas antes da ação atual. Até o momento este método não executa nenhuma ação interna do <em>SuitUp</em>, portanto não precisa ser chamado com <code>parent::init();</code> ao ser sobrescrito, <strong>embora isso seja uma boa prática para prevenir conflitos com versões futuras</strong>. :eyes:</p>
<h4 id="this-gtindexaction"><a name="indexAction" href="#"></a><code>$this-&gt;indexAction();</code><a class="headerlink" href="#this-gtindexaction" title="Permanent link">&para;</a></h4>
<p>A ação <code>index</code> é chamada quando o nome da ação não é apontada na url ex.: <code>http://seusite.dev/</code> que chamará o módulo <code>default</code>, o controlador <code>index</code> e a ação <code>index</code>. Este método ser incluído no <em>MvcAbstractController</em> apenas previne o caso de um novo controlador não implementar esta ação. Caso seja sobrescrito <strong>não necessita</strong> ser invocado com <code>parent::indexAction();</code>.</p>
<h4 id="this-gterroraction"><a name="errorAction" href="#"></a><code>$this-&gt;errorAction();</code><a class="headerlink" href="#this-gterroraction" title="Permanent link">&para;</a></h4>
<p>Sempre que o <em>SuitUp</em> encontra pelo caminho uma <code>Exception</code> não tratada, ele dispara para a tela de erros do [[ErrorController|2.2 ErrorController]]. Dentro desse controlador <code>ErrorController</code> ele irá executar esta ação se não for o tipo de erro 404 (Página Não Encontrada).</p>
<p>Leia mais em: [[ErrorController|2.2 ErrorController]]</p>
<h4 id="this-gtnotfoundaction"><a name="notFoundAction" href="#"></a><code>$this-&gt;notFoundAction();</code><a class="headerlink" href="#this-gtnotfoundaction" title="Permanent link">&para;</a></h4>
<p>Sempre que o <em>SuitUp</em> encontra pelo caminho uma <code>Exception</code> não tratada, ele dispara para a tela de erros do [[ErrorController|2.2 ErrorController]]. Esta <code>Exception</code> pode ter sido lançada por causa de um <em>módulo</em>, <em>controlador</em> ou <em>ação</em> que não foi encontrada, para estes casos é que esta ação é lançada no <code>ErrorController</code>.</p>
<p>Leia mais em: [[ErrorController|2.2 ErrorController]]</p>
<h4 id="this-gtposdispatch"><a name="posDispatch" href="#"></a><code>$this-&gt;posDispatch();</code><a class="headerlink" href="#this-gtposdispatch" title="Permanent link">&para;</a></h4>
<p>Lançado <strong>depois</strong> de qualquer ação no controlador, executa internamente algumas ações para o bom funcionamento do <em>SuitUp</em>. Não deve ser sobrescrito sem ser chamado internamente com <code>parent::posDispatch();</code>.</p>
<h4 id="this-gtgetmsgnsp"><a name="getMsgNsp" href="#"></a><code>$this-&gt;getMsgNsp();</code><a class="headerlink" href="#this-gtgetmsgnsp" title="Permanent link">&para;</a></h4>
<p>Nós não queremos misturar as mensagens disparadas em módulos diferentes do seu sistema, por isso, este método retorna o namespace do módulo atual. Mas o que são estas mensagens?</p>
<p>Mais adiante você notará que existe o método <code>$this-&gt;addMsg($msg, $type = MsgType::INFO, $withRedirect = false);</code>, com o parâmetro <code>$withRedirect = true</code> o <em>SuitUp</em> irá guardar sua mensagem na <code>$_SESSION</code> para apresentá-la somente na próxima página, normalmente usado antes a um <code>$this-&gt;redirect($to);</code></p>
<h4 id="this-gtgetmodulename"><a name="getModuleName" href="#"></a><code>$this-&gt;getModuleName();</code><a class="headerlink" href="#this-gtgetmodulename" title="Permanent link">&para;</a></h4>
<p>Retorna o nome do módulo atual.</p>
<p>Exemplo:<br />
Módulo padrão (<code>http://seusite.dev/</code>), retorna: <code>default</code><br />
Módulo <code>Admin</code> (<code>http://seusite.dev/admin</code>), retorna: <code>admin</code>  </p>
<h4 id="this-gtgetcontrollername"><a name="getControllerName" href="#"></a><code>$this-&gt;getControllerName();</code><a class="headerlink" href="#this-gtgetcontrollername" title="Permanent link">&para;</a></h4>
<p>Retorna o nome do controlador atual.</p>
<p>Exemplo:<br />
<code>http://seusite.dev/</code>: Retorna <code>index</code><br />
<code>http://seusite.dev/admin/usuario</code>: Retorna <code>usuario</code>  </p>
<h4 id="this-gtgetactionname"><a name="getActionName" href="#"></a><code>$this-&gt;getActionName();</code><a class="headerlink" href="#this-gtgetactionname" title="Permanent link">&para;</a></h4>
<p>Retorna o nome da ação atual.</p>
<p>Exemplo:<br />
<code>http://seusite.dev/</code>: Retorna <code>index</code><br />
<code>http://seusite.dev/admin/usuario/editar</code>: Retorna <code>editar</code></p>
<h4 id="this-gtgetlayoutname"><a name="getLayoutName" href="#"></a><code>$this-&gt;getLayoutName();</code><a class="headerlink" href="#this-gtgetlayoutname" title="Permanent link">&para;</a></h4>
<p>Retorna o nome do layout que está sendo utilizado no momento. [[Clique aqui|3. Layouts]] para entender melhor sobre o que se trata <code>layout</code>. </p>
<h4 id="this-gtsetlayoutname-path-null"><a name="setLayout" href="#"></a><code>$this-&gt;setLayout($name, $path = null);</code><a class="headerlink" href="#this-gtsetlayoutname-path-null" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> $<span class="nv">name</span><span class="c1">; // Nome do novo layout, este é o nome do arquivo sem o `.phtml`, por isso não use espaços ou caractéres especiais</span>
<span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> $<span class="nv">path</span><span class="c1">; // Caminho até o novo arquivo de layout</span>
</pre></div>
</td></tr></table>

<p>É possível mudar o <em>layout</em> em tempo de execução, segue o exemplo:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="x">// Execute este código no seu controlador para ver o que acontece</span>
<span class="x">public function indexAction()</span>
<span class="x">{</span>
<span class="x">    // Imprime o nome do layout atual</span>
<span class="x">    echo dump($this-&gt;getLayoutName());</span>

<span class="x">    // troca o layout</span>
<span class="x">    $this-&gt;setLayout(&#39;error&#39;);</span>

<span class="x">    // Imprime o novo nome do layout</span>
<span class="x">    dump(&quot;\n&lt;br/&gt;&quot;$this-&gt;getLayoutName());</span>
<span class="x">}</span>
</pre></div>
</td></tr></table>

<h4 id="this-gtrenderviewrenderviewname-vars-array-renderviewpath-null"><a name="renderView" href="#"></a><code>$this-&gt;renderView($renderViewName, $vars = array(), $renderViewPath = null);</code><a class="headerlink" href="#this-gtrenderviewrenderviewname-vars-array-renderviewpath-null" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> $<span class="nv">renderViewName</span><span class="c1">;  // Nome do arquivo que será renderizado</span>
<span class="ss">(</span><span class="nv">array</span><span class="ss">)</span>  $<span class="nv">vars</span><span class="c1">;            // Variáveis que estarão disponíveis neste arquivo</span>
<span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> $<span class="nv">renderViewPath</span><span class="c1">;  // Caminho até este arquivo.</span>
</pre></div>
</td></tr></table>

<p><em>Renderizar uma view</em> é um termo que significa que você quer capturar um arquivo html e seu conteúdo, podendo inclusive passar a ela variáveis. Isso é muito comum ao por exemplo, enviar um e-mail HTML ao seu cliente com dados de um pedido. </p>
<h4 id="this-gtaddviewvarname-value-null"><a name="addViewVar" href="#"></a><code>$this-&gt;addViewVar($name, $value = null);</code><a class="headerlink" href="#this-gtaddviewvarname-value-null" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> <span class="o">|</span> <span class="ss">(</span><span class="nv">array</span><span class="ss">)</span> $<span class="nv">name</span><span class="c1">; // Nome da variável que será acessível no controlador ou um array associativo com nome =&gt; valor</span>
<span class="ss">(</span><span class="nv">mixed</span><span class="ss">)</span> $<span class="nv">value</span><span class="c1">;           // No caso do parâmetro anterior não ser um array este será o valor desta variável</span>
</pre></div>
</td></tr></table>

<p>Após realizar as ações que você precisa que seu <em>controlador</em> realize você possivelmente vai precisar passar para a <em>view</em> alguma informação, este método existe para isso.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="x">// File: Qualquer arquivo Controller</span>
<span class="x">public function indexAction()</span>
<span class="x">{</span>
<span class="x">    $something = [&quot;a&quot;, 156, 0.5, &#39;c&#39;];</span>
<span class="x">    $other = &quot;A value from your mind&quot;;</span>

<span class="x">    // Pode transferir esta variavel para a view assim</span>
<span class="x">    $this-&gt;addViewVar(&#39;thing&#39;, $something);</span>

<span class="x">    // Ou pode passar todas as variáveis de uma só vez no final da acao (metodo)</span>
<span class="x">    $this-&gt;addViewVar(array(</span>
<span class="x">        &#39;thing&#39; =&gt; $something,</span>
<span class="x">        &#39;otherStuff&#39; =&gt; $other,</span>
<span class="x">    ));</span>
<span class="x">}</span>
</pre></div>
</td></tr></table>

<p>Automaticamente estes valores estarão disponíveis na <strong>respectiva</strong> <em>view</em>.
Neste caso ficarão acessíveis por <code>$thing</code> e <code>$otherStuff</code>;</p>
<h4 id="this-gtisviewvarname"><a name="isViewVar" href="#"></a><code>$this-&gt;isViewVar($name);</code><a class="headerlink" href="#this-gtisviewvarname" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="err">$</span><span class="n">name</span><span class="p">;</span> <span class="o">//</span> <span class="n">Nome</span> <span class="n">da</span> <span class="n">variável</span> <span class="n">que</span> <span class="n">está</span> <span class="n">procurando</span>
</pre></div>
</td></tr></table>

<p>Você pode verificar se uma variável já foi passada para a <em>view</em> utilizando este método.</p>
<h4 id="this-gtgetviewvarname"><a name="getViewVar" href="#"></a><code>$this-&gt;getViewVar($name);</code><a class="headerlink" href="#this-gtgetviewvarname" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="err">$</span><span class="n">name</span><span class="p">;</span> <span class="o">//</span> <span class="n">Nome</span> <span class="n">da</span> <span class="n">variável</span> <span class="n">que</span> <span class="n">está</span> <span class="n">procurando</span>
</pre></div>
</td></tr></table>

<p>Mesmo antes da <em>view</em> você pode recuperar o valor de uma variável utilizando este método.</p>
<h4 id="this-gtgetparams"><a name="getParams" href="#"></a><code>$this-&gt;getParams();</code><a class="headerlink" href="#this-gtgetparams" title="Permanent link">&para;</a></h4>
<p>Este método retorna todos os parâmetros passados pela URL (<a href="https://en.wikipedia.org/wiki/Query_string">query string</a> GET) juntamente com os parâmetros definidos nas [[rotas|6. Rotas]]. Para mais informações sobre rotas [[clique aqui|6. Rotas]].</p>
<h4 id="this-gtgetparamname-default-null"><a name="getParam" href="#"></a><code>$this-&gt;getParam($name, $default = null);</code><a class="headerlink" href="#this-gtgetparamname-default-null" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> $<span class="nv">name</span><span class="c1">;    // Nome do parâmetro que você está tentando capturar</span>
<span class="ss">(</span><span class="nv">mixed</span><span class="ss">)</span>  <span class="mh">$defa</span><span class="nv">ult</span><span class="c1">; // Valor que será retornado caso o parâmetro não exista</span>
</pre></div>
</td></tr></table>

<p>A exemplo do método <code>$this-&gt;getParams();</code> este método irá retornar apenas o próprio parâmetro apontado por <code>$name</code> e o valor apontado em <code>$default</code> caso este não exista.</p>
<h4 id="this-gtispost"><a name="isPost" href="#"></a><code>$this-&gt;isPost();</code><a class="headerlink" href="#this-gtispost" title="Permanent link">&para;</a></h4>
<p>Este método é extremamente simples, mas igualmente importante. Com ele é possível se houve um POST de formulário ou de <em>WebService</em>. Retorna somente <code>true</code> ou <code>false</code>.</p>
<h4 id="this-gtgetpostname-null-default-null"><a name="getPost" href="#"></a><code>$this-&gt;getPost($name = null, $default = null);</code><a class="headerlink" href="#this-gtgetpostname-null-default-null" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> $<span class="nv">name</span><span class="c1">;   // Nome do item de post que deseja capturar</span>
<span class="ss">(</span><span class="nv">mixed</span><span class="ss">)</span> <span class="mh">$defa</span><span class="nv">ult</span><span class="c1">; // Valor que será retornado caso este item não exista</span>
</pre></div>
</td></tr></table>

<p>Você pode utilizar este método para capturar <strong>todo</strong> o POST ou apenas um índice específico apenas utilizando ou não os parâmetros que ele leva.</p>
<h4 id="this-gtsetloginarray-data-array"><a name="setLogin" href="#"></a> <code>$this-&gt;setLogin(array $data = array());</code><a class="headerlink" href="#this-gtsetloginarray-data-array" title="Permanent link">&para;</a></h4>
<p>O <em>MvcAbstractController</em> contém o atributo <code>$authNsp</code> que funciona como <em>namespace</em> e te permite sobrescreve-lo para que você possa criar uma sessão diferente para cada módulo do seu sistema. Isso significa que mesmo sendo um único sistema você pode fazer login com usuários diferentes em vários módulos ao mesmo tempo.</p>
<h5 id="login-simples">Login simples<a class="headerlink" href="#login-simples" title="Permanent link">&para;</a></h5>
<p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="x">    // File: Qualquer controlador</span>

<span class="x">    // Vamos lá, isso é só um exemplo...</span>
<span class="x">    $loginData = $this-&gt;getPost();</span>

<span class="x">    $this-&gt;setLogin($loginData);</span>
</pre></div>
</td></tr></table>
Note que neste caso simplesmente gravamos os dados do usuário diretamente na sessão.</p>
<h5 id="login-com-namespace-por-modulo">Login com <code>namespace</code> por módulo<a class="headerlink" href="#login-com-namespace-por-modulo" title="Permanent link">&para;</a></h5>
<p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="x">    // File: AbstractController do seu módulo diferentão</span>

<span class="x">    public function __construct() {</span>
<span class="x">        // Apenas seja criativo para criar um namespace legal</span>
<span class="x">        parent::$authNsp = &quot;umNamespaceQualquer&quot;;</span>
<span class="x">    }</span>
</pre></div>
</td></tr></table>
Note que modificamos o <code>namespace</code> e assim os dados de login ficarão independentes. <strong>Depois disso basta seguir o passo anterior para gravar o login em <code>$this-&gt;setLogin($loginData)</code></strong>.</p>
<h4 id="this-gtislogged"><a name="isLogged" href="#"></a><code>$this-&gt;isLogged();</code><a class="headerlink" href="#this-gtislogged" title="Permanent link">&para;</a></h4>
<p>Retorna <code>true</code> caso exista alguma coisa no <code>namespace</code> atual de login e <code>false</code> do contrário.</p>
<h4 id="static-this-gtgetloginkey-null-default-null"><a name="getLogin" href="#"></a><code>static $this-&gt;getLogin($key = null, $default = null)();</code><a class="headerlink" href="#static-this-gtgetloginkey-null-default-null" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="err">$</span><span class="k">key</span><span class="p">;</span>    <span class="o">//</span> <span class="n">Um</span> <span class="err">í</span><span class="n">ndice</span> <span class="n">para</span> <span class="n">ser</span> <span class="n">buscado</span>
<span class="p">(</span><span class="n">mixed</span><span class="p">)</span> <span class="err">$</span><span class="k">default</span><span class="p">;</span> <span class="o">//</span> <span class="n">Um</span> <span class="n">valor</span> <span class="n">padrão</span> <span class="n">caso</span> <span class="n">o</span> <span class="err">í</span><span class="n">ndice</span> <span class="n">não</span> <span class="n">seja</span> <span class="n">encontrado</span><span class="p">.</span>
</pre></div>
</td></tr></table>

<p>Se o parâmetro <code>$key</code> não for passado então este método retornará tudo que está na sessão de login deste <code>namespace</code>. Quando existe o parâmetro <code>$key</code> o método tenta retorna-lo e caso não encontre este índice irá retornar o valor de <code>$default</code>.</p>
<blockquote>
<p>Algo interessante de se notar neste método é que ele pode ser acessado estaticamente, ou seja, até mesmo nas <em>views</em> você pode acessa-lo.</p>
</blockquote>
<p>Exemplo:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="x">&lt;h2&gt;Nome: </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">\SuitUp\Mvc\MvcAbstractController</span><span class="o">::</span><span class="na">getLogin</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/h2&gt;</span>
</pre></div>
</td></tr></table></p>
<p><strong>Mas não é necessário</strong>. Dentro das views é possível usar a variável <code>$login</code> em vez disso.</p>
<h4 id="static-this-gtupdateloginkeykey-value"><a name="updateLoginKey" href="#"></a><code>static $this-&gt;updateLoginKey($key, $value);</code><a class="headerlink" href="#static-this-gtupdateloginkeykey-value" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="err">$</span><span class="k">key</span><span class="p">;</span>  <span class="o">//</span> <span class="n">Um</span> <span class="n">indice</span> <span class="n">já</span> <span class="n">existente</span> <span class="n">para</span> <span class="n">alterar</span>
<span class="p">(</span><span class="n">mixed</span><span class="p">)</span> <span class="err">$</span><span class="n">value</span><span class="p">;</span> <span class="o">//</span> <span class="n">Valor</span>
</pre></div>
</td></tr></table>

<p>Atualiza um índice da sessão de login para o módulo. <em>Se o índice não for encontrado o método não faz nada.</em>  </p>
<blockquote>
<p>A exemplo do <code>getLogin</code> este método também é estático e pode ser acessado de qualquer lugar.</p>
</blockquote>
<h4 id="this-gtaddmsgmsg-type-msgtypeinfo-withredirect-false"><a name="addMsg" href="#"></a><code>$this-&gt;addMsg($msg, $type = MsgType::INFO, $withRedirect = false);</code><a class="headerlink" href="#this-gtaddmsgmsg-type-msgtypeinfo-withredirect-false" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="err">$</span><span class="n">msg</span><span class="p">;</span>       <span class="o">//</span> <span class="n">Mensagem</span> <span class="n">que</span> <span class="n">você</span> <span class="n">quer</span> <span class="n">disparar</span>
<span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="err">$</span><span class="k">type</span>       <span class="o">//</span> <span class="n">Tipo</span> <span class="n">de</span> <span class="n">mensagem</span>
<span class="p">(</span><span class="n">bool</span><span class="p">)</span> <span class="err">$</span><span class="n">withRedirect</span> <span class="o">//</span> <span class="n">Com</span> <span class="n">ou</span> <span class="n">sem</span> <span class="n">redirecionamento</span>
</pre></div>
</td></tr></table>

<p>Este método adiciona uma mensagem separando por tipo para o sistema disparar. Para capturar esta mensagem somente após um redirecionamento basta passar o terceiro parâmetro <code>$withRedirect</code> como <code>true</code>.</p>
<p>Desculpa, temos que falar sobre o <a href="http://getbootstrap.com/components/#alerts">Bootstrap</a>. Atualmente a maioria dos sites são construídos com a ajuda do <em>Bootstrap</em> e consigo ele traz os <em>alerts</em> que são <em>boxes</em> coloridos feitos com intuito de exibir mensagens aos usuários. Por padrão o <em>Bootstrap</em> utiliza 4 tipos de boxes (alert-success, alert-warning, alert-info e alert-danger). Por isso se você abrir [[este arquivo do SuitUp|https://github.com/braghimsistemas/suitup-php/blob/master/src/Enum/MsgType.php]] você verá exatamente estes quatro tipos de mensagens.</p>
<p>Você pode criar seus próprios tipos de mensagens sem problemas, mas se for fazer isso nós recomendamos que seja feito em forma de constantes para assim evitar erros de digitação e consequentes bugs desnecessários.</p>
<blockquote>
<p>Para recuperar nas <em>views</em> e <em>layout</em> as mensagens disparadas [[clique aqui|3. Layouts#mensagens-de-layout]].</p>
</blockquote>
<h4 id="this-gtuploadfilefile-where-exitfilename-null-array-allowedext-arrayjpeg-jpg-pdf-png-gif"><a name="uploadFile" href="#"></a><code>$this-&gt;uploadFile($file, $where, $exitFilename = null, array $allowedExt = array('jpeg', 'jpg', 'pdf', 'png', 'gif'));</code><a class="headerlink" href="#this-gtuploadfilefile-where-exitfilename-null-array-allowedext-arrayjpeg-jpg-pdf-png-gif" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ss">(</span><span class="nv">array</span><span class="ss">)</span> <span class="mh">$f</span><span class="nv">ile</span><span class="c1">;          // Índice do arquivo em $_FILES</span>
<span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> $<span class="nv">where</span><span class="c1">;        // Caminho para onde você quer mover o arquivo depois do upload</span>
<span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> <span class="mh">$e</span><span class="nv">xitFilename</span><span class="c1">; // Nome do arquivo depois do upload</span>
<span class="ss">(</span><span class="nv">array</span><span class="ss">)</span> <span class="mh">$a</span><span class="nv">llowedExt</span><span class="c1">;    // Lista de ext&#39;s aceitas pelo upload</span>
</pre></div>
</td></tr></table>

<p>Este método efetua o upload de arquivos via formulário HTML.</p>
<blockquote>
<p>Se você abrir o arquivo <code>composer.json</code> do <em>SuitUp</em> verá que há um <code>require verot/class.upload.php</code>. Nós não estamos tentando fazer com que o <em>SuitUp</em> seja seu único caminho para fazer tudo que você precisa em seu aplicativo. Na verdade apoiamos a utilização de bibliotecas que são de fácil manuseio e fazem todo o trabalho duro por isso em vez de fazermos nosso próprio módulo para upload de arquivos recomendamos [[verot/class.upload.php|https://github.com/verot/class.upload.php]] que já está há anos no mercado e sempre cumpriu até mais do que o necessário para uploads de arquivos.</p>
</blockquote>
<p>Se sentir que este método não supre suas necessidades, fique a vontade para sobrescreve-lo em seu <em>AbstractController</em>.</p>
<blockquote>
<h2 id="atencao">Atenção.<a class="headerlink" href="#atencao" title="Permanent link">&para;</a></h2>
<p>Este método joga uma <code>Exception</code> em caso de erros, portanto não esqueça de "cobrir" seu código com um <code>try, catch</code></p>
</blockquote>
<h4 id="this-gtuploadfileimagebase64file-maxfilesize-524288"><a name="uploadFileImageBase64" href="#"></a><code>$this-&gt;uploadFileImageBase64($file, $maxFilesize = 524288);</code><a class="headerlink" href="#this-gtuploadfileimagebase64file-maxfilesize-524288" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="nb">array</span><span class="p">)</span> <span class="err">$</span><span class="n">file</span><span class="p">;</span>     <span class="o">//</span> <span class="n">Arquivo</span> <span class="n">feito</span> <span class="n">upload</span> <span class="p">(</span><span class="err">$</span><span class="n">_FILES</span><span class="p">)</span>
<span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="n">maxFilesize</span><span class="p">;</span> <span class="o">//</span> <span class="n">Tamanho</span> <span class="n">máximo</span> <span class="n">para</span> <span class="n">o</span> <span class="n">arquivo</span>
</pre></div>
</td></tr></table>

<p>É possível salvar uma imagem não como arquivo, mas como <code>string</code> utilizando para isso o <code>base64</code>, para isso basta utilizar este método.</p>
<blockquote>
<h2 id="atencao_1">Atenção.<a class="headerlink" href="#atencao_1" title="Permanent link">&para;</a></h2>
<p>Este método joga uma <code>Exception</code> em caso de erros, portanto não esqueça de "cobrir" seu código com um <code>try, catch</code></p>
</blockquote>
<h4 id="this-gtgetreferer"><a name="getReferer" href="#"></a><code>$this-&gt;getReferer();</code><a class="headerlink" href="#this-gtgetreferer" title="Permanent link">&para;</a></h4>
<p>Este método retorna a URL em que o usuário esteve antes de chegar à página atual. Faz isso através de <code>$_SERVER['HTTP_REFERER']</code>.</p>
<h4 id="this-gtredirectto"><a name="redirect" href="#"></a><code>$this-&gt;redirect($to);</code><a class="headerlink" href="#this-gtredirectto" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="err">$</span><span class="k">to</span><span class="p">;</span> <span class="o">//</span> <span class="k">Local</span> <span class="n">para</span> <span class="n">onde</span> <span class="n">quer</span> <span class="n">redirecionar</span>
</pre></div>
</td></tr></table>

<p>Este método é simplesmente um atalho para <code>header('Location: $to');</code>.</p>
<blockquote>
<p>Procure utilizar este método sempre precedido pelo <code>return</code> dentro da ação
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="x">public function indexAction()</span>
<span class="x">{</span>
<span class="x">    return $this-&gt;redirect(&#39;/&#39;);</span>
<span class="x">}</span>
</pre></div>
</td></tr></table></p>
</blockquote>
<h4 id="this-gtajaxarray-data"><a name="ajax" href="#"></a><code>$this-&gt;ajax(array $data);</code><a class="headerlink" href="#this-gtajaxarray-data" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="nb">array</span><span class="p">)</span> <span class="err">$</span><span class="k">data</span> <span class="o">//</span> <span class="nb">Array</span> <span class="n">que</span> <span class="n">será</span> <span class="n">transformado</span> <span class="n">em</span> <span class="n">JSON</span> <span class="n">e</span> <span class="n">retornado</span>
</pre></div>
</td></tr></table>

<p>É muito comum que em vez de html haja a necessidade de alguma ação retornar um JSON, seja para um AJAX ou até mesmo para construir um módulo de WebService. Para isso basta que no final do sua ação você passe a este método um array modelado com a forma que você deseja para seu JSON. Este próprio método evita que seja renderizado qualquer HTML e dispara também o <code>header("Content-Type: application/json; Charset=UTF-8")</code>.</p>
<blockquote>
<h2 id="atencao_2">Atenção!<a class="headerlink" href="#atencao_2" title="Permanent link">&para;</a></h2>
<p>Qualquer alteração após a chamada a este método não tem nenhum efeito, pois ele próprio faz um <code>exit</code> o que faz com que a aplicação pare totalmente.</p>
</blockquote>
<hr />
<h3 id="sessionfilter-sessao-de-filtros">SessionFilter (Sessão de Filtros)<a class="headerlink" href="#sessionfilter-sessao-de-filtros" title="Permanent link">&para;</a></h3>
<p>Você provavelmente já precisou utilizar dados de um formulário para filtrar uma lista de resultados. Para fazer isso você pode utilizar <code>GET</code> que recupera os parâmetros de filtro pela URL ou <code>POST</code> que os esconde e torna o formulário mais seguro.</p>
<p>Em primeiro lugar gostamos de frisar que na maioria dos casos utilizar <code>GET</code> é sim uma boa opção pelo fato de que assim os filtros podem ser compartilhados, mas existem casos em que isso pode ser perigoso ou que você não queira deixar a URL <em>feia</em>.</p>
<blockquote>
<p>Seja como for ao efetuar esses filtros por <code>POST</code> e utilizar paginação ao mesmo tempo os dados do filtro serão perdidos após a primeira página, para isso temos aqui estes métodos abaixo que te ajudam de modo simples a manter os filtros mesmo utilizando paginação.</p>
</blockquote>
<p>Como funciona isso?<br />
Através de um <code>namespace</code> específico para cada ação do seu sistema o <em>SuitUp</em> separa os dados deste filtro e os guarda na sessão (<code>$_SESSION</code>).</p>
<p>Exemplo de workflow funcional.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;?php</span>
<span class="c1">// File: ModuleDefault/Controllers/IndexController.php</span>

<span class="k">namespace</span> <span class="nx">ModuleDefault\Controllers</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">IndexController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Verifica se houve post</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isPost</span><span class="p">())</span> <span class="p">{</span>

            <span class="c1">// Verifica se foi clicado no botão para limpar o formulário</span>
            <span class="c1">// Isso é feito com &lt;button type=&quot;submit&quot; name=&quot;clear&quot;&gt;Limpar&lt;/button&gt;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getPost</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">clearSessionFilter</span><span class="p">();</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

                <span class="c1">// Adiciona ou substitui os filtros na sessao</span>
                <span class="c1">// unica para esta acao</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addSessionFilter</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getPost</span><span class="p">());</span>

                <span class="c1">// Redireciona para a mesma tela apenas para evitar</span>
                <span class="c1">// a confirmação de reenvio de formulário do navegador</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nv">$userBo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ModuleDefault</span><span class="o">/</span><span class="nx">Model</span><span class="o">/</span><span class="nx">UserBusiness</span><span class="p">();</span>

        <span class="c1">// Efetua a consulta da lista normalmente</span>
        <span class="c1">// ESTA LISTA NORMALMENTE SERA PAGINADA</span>
        <span class="nv">$list</span> <span class="o">=</span> <span class="nv">$userBo</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getSessionFilter</span><span class="p">());</span>

        <span class="c1">// Na view esta lista será acessível por $usersList</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addViewVar</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;usersList&#39;</span> <span class="o">=&gt;</span> <span class="nv">$list</span><span class="p">,</span>
        <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></p>
<h4 id="this-gtaddsessionfiltername-value-null"><a name="addSessionFilter" href="#"></a><code>$this-&gt;addSessionFilter($name, $value = null);</code><a class="headerlink" href="#this-gtaddsessionfiltername-value-null" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">string</span> <span class="o">|</span> <span class="nb">array</span><span class="p">)</span> <span class="err">$</span><span class="n">name</span><span class="p">;</span> <span class="o">//</span> <span class="n">Adiciona</span> <span class="n">uma</span> <span class="n">lista</span> <span class="n">ou</span> <span class="n">um</span> <span class="err">í</span><span class="n">ndice</span> <span class="n">a</span> <span class="n">sessão</span>
<span class="p">(</span><span class="n">mixed</span><span class="p">)</span> <span class="err">$</span><span class="n">value</span><span class="p">;</span>         <span class="o">//</span> <span class="k">No</span> <span class="n">caso</span> <span class="n">de</span> <span class="n">adicionar</span> <span class="n">um</span> <span class="err">í</span><span class="n">ndice</span> <span class="n">este</span> <span class="n">será</span> <span class="n">seu</span> <span class="n">valor</span>
</pre></div>
</td></tr></table>

<p>Adiciona ou atualiza um ou vários itens a um espaço único por ação na sessão de filtros.</p>
<h4 id="this-gtgetsessionfilter"><a name="getSessionFilter" href="#"></a><code>$this-&gt;getSessionFilter();</code><a class="headerlink" href="#this-gtgetsessionfilter" title="Permanent link">&para;</a></h4>
<p>Retorna todos os itens de sessão para o controlador e ação atuais.</p>
<h4 id="this-gtremovesessionfilterkey-null"><a name="removeSessionFilter" href="#"></a><code>$this-&gt;removeSessionFilter($key = null);</code><a class="headerlink" href="#this-gtremovesessionfilterkey-null" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="err">$</span><span class="k">key</span><span class="p">;</span> <span class="o">//</span> <span class="err">Í</span><span class="n">ndice</span> <span class="n">que</span> <span class="n">quer</span> <span class="n">remover</span>
</pre></div>
</td></tr></table>

<p>Remove um item da sessão de filtros único por ação.</p>
<h4 id="this-gtclearsessionfilter"><a name="clearSessionFilter" href="#"></a><code>$this-&gt;clearSessionFilter();</code><a class="headerlink" href="#this-gtclearsessionfilter" title="Permanent link">&para;</a></h4>
<p>Remove todos os filtros na sessão de filtros únicos para a ação atual.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../2.-Controllers-e-Views/" title="2. Controllers e Views" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                2. Controllers e Views
              </span>
            </div>
          </a>
        
        
          <a href="../2.2-ErrorController/" title="2.2 ErrorController" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                2.2 ErrorController
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Braghim Sistemas
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/braghimsistemas" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.youtube.com/channel/UCnQKkBQpuqSqTIWN0XGgAlQ" class="md-footer-social__link fa fa-youtube"></a>
    
      <a href="https://www.facebook.com/braghimsistemas/" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://github.com/marcobraghim" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://github.com/thizer" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.youtube.com/channel/UCwoZZYTjG-RsvaQZVTyc_5w" class="md-footer-social__link fa fa-youtube"></a>
    
      <a href="https://www.facebook.com/thizer.apps/" class="md-footer-social__link fa fa-facebook"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
  </body>
</html>